File setupPy = file('setup.py')

/**
 *  テーマを配布用にパッケージングタスク。
 */
task buildPackage(type:Exec) {
    executable "python"
    args setupPy.absolutePath, "sdist"
}

task installPackage(type:Exec) {
    executable "pip"
    args "install", "dist/sphinxbootstrap4theme-${version}.zip"
}

/**
 * PyPIにテーマを登録タスク。
 */
task uploadPackage(type:Exec) {
    executable "python"
    args setupPy.absolutePath, "register", "sdist", "upload"
}

task cleanExample(type: Delete) {
    delete './example/_build'
}

task example(dependsOn:'cleanExample', type:Exec) {
    executable "sphinx-build"
    args "-b", "html", "./example", "./example/_build", "-c", "./example", "-A", "version=${version}"
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.13'
}
